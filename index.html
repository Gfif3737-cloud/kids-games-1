<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ò–≥—Ä—ã –≤ –º–µ—Ç—Ä–æ</title>

  <style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: #b71c1c;
      color: white;
      text-align: center;
      min-height: 100vh;
    }

    .screen {
      display: none;
      padding: 20px;
    }

    .screen.active {
      display: block;
    }

    .title {
      font-size: 42px;
      font-weight: 900;
      margin-top: 20px;
      letter-spacing: 2px;
    }

    .subtitle {
      font-size: 22px;
      margin-bottom: 20px;
    }

    button {
      font-size: 18px;
      padding: 12px 20px;
      margin: 8px;
      border-radius: 20px;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }

    .red-btn {
      background: white;
      color: #b71c1c;
    }

    .blue-btn {
      background: white;
      color: #1565c0;
    }

    .back-btn {
      background: white;
      color: #333;
    }

    /* ===== –ù–ê–ô–î–ò –ü–ê–†–£ ===== */

    .memory-grid {
      display: grid;
      grid-template-columns: repeat(4, 70px);
      gap: 12px;
      justify-content: center;
      margin-top: 20px;
    }

    .card {
      width: 70px;
      height: 70px;
      background: white;
      color: black;
      font-size: 34px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
      cursor: pointer;
      user-select: none;
    }

    .card.hidden {
      background: #333;
      color: transparent;
    }

    /* ===== –õ–ê–ë–ò–†–ò–ù–¢ ===== */

    #maze {
      font-size: 32px;
      line-height: 36px;
      white-space: pre;
      margin: 20px auto;
      max-width: 320px;
    }

    .controls {
      margin-top: 20px;
    }

    .controls button {
      width: 70px;
      height: 70px;
      font-size: 28px;
      border-radius: 50%;
      background: white;
      color: black;
    }

    .controls-row {
      display: flex;
      justify-content: center;
    }

    @media (max-width: 500px) {
      .title { font-size: 34px; }
      .subtitle { font-size: 20px; }
      #maze {
        font-size: 26px;
        line-height: 32px;
      }
      .memory-grid {
        grid-template-columns: repeat(4, 60px);
      }
      .card {
        width: 60px;
        height: 60px;
        font-size: 28px;
      }
    }
  </style>
</head>

<body>

<!-- ===== –¢–ò–¢–£–õ ===== -->
<div id="home" class="screen active">
  <h1 class="title">–ò–ì–†–´ –í –ú–ï–¢–†–û</h1>
  <p class="subtitle">–í—ã–±–µ—Ä–∏ –ª–∏–Ω–∏—é</p>

  <button class="red-btn" onclick="openMemoryMenu()">üî¥ –õ–∏–Ω–∏—è –ø–∞–º—è—Ç–∏</button>
  <button class="blue-btn" onclick="openMazeMenu()">üîµ –õ–∏–Ω–∏—è –ª–∞–±–∏—Ä–∏–Ω—Ç–∞</button>
</div>

<!-- ===== –ú–ï–ù–Æ –õ–ò–ù–ò–ò –ü–ê–ú–Ø–¢–ò ===== -->
<div id="memoryMenu" class="screen">
  <h1 class="title">–õ–∏–Ω–∏—è –ø–∞–º—è—Ç–∏</h1>
  <p class="subtitle">–í—ã–±–µ—Ä–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π</p>

  <button onclick="startMemory('–°–º–µ—à–∞—Ä–∏–∫–∏')">üê∞ –°–º–µ—à–∞—Ä–∏–∫–∏</button>
  <button onclick="startMemory('–§–∏–∫—Å–∏–∫–∏')">üîß –§–∏–∫—Å–∏–∫–∏</button>
  <button onclick="startMemory('–ú–∞—à–∞ –∏ –ú–µ–¥–≤–µ–¥—å')">üêª –ú–∞—à–∞ –∏ –ú–µ–¥–≤–µ–¥—å</button>
  <button onclick="startMemory('–í–∏–Ω–Ω–∏-–ü—É—Ö')">üçØ –í–∏–Ω–Ω–∏-–ü—É—Ö</button>
  <button onclick="startMemory('–ü—Ä–æ—Å—Ç–æ–∫–≤–∞—à–∏–Ω–æ')">üêÆ –ü—Ä–æ—Å—Ç–æ–∫–≤–∞—à–∏–Ω–æ</button>

  <button class="back-btn" onclick="goHome()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>

<!-- ===== –ò–ì–†–ê –ù–ê–ô–î–ò –ü–ê–†–£ ===== -->
<div id="memoryGame" class="screen">
  <h1 class="title">–ù–∞–π–¥–∏ –ø–∞—Ä—É</h1>
  <p class="subtitle" id="memoryTitle"></p>

  <div class="memory-grid" id="memoryGrid"></div>

  <p id="memoryStatus" style="margin-top:15px;"></p>

  <button class="back-btn" onclick="openMemoryMenu()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>

<!-- ===== –ú–ï–ù–Æ –õ–ê–ë–ò–†–ò–ù–¢–ê ===== -->
<div id="mazeMenu" class="screen">
  <h1 class="title">–õ–∏–Ω–∏—è –ª–∞–±–∏—Ä–∏–Ω—Ç–∞</h1>
  <p class="subtitle">–í—ã–±–µ—Ä–∏ –≥–µ—Ä–æ—è</p>

  <button onclick="startMaze('–ß–µ–±—É—Ä–∞—à–∫–∞')">üêª –ß–µ–±—É—Ä–∞—à–∫–∞ ‚Üí üçä</button>
  <button onclick="startMaze('–ü–∏–Ω')">üêß –ü–∏–Ω ‚Üí ü§ñ</button>
  <button onclick="startMaze('–ú–∞—Ç—Ä–æ—Å–∫–∏–Ω')">üê± –ú–∞—Ç—Ä–æ—Å–∫–∏–Ω ‚Üí üêÆ</button>
  <button onclick="startMaze('–ú–∞—à–∞')">üëß –ú–∞—à–∞ ‚Üí üè†</button>

  <button class="back-btn" onclick="goHome()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>

<!-- ===== –ò–ì–†–ê –õ–ê–ë–ò–†–ò–ù–¢ ===== -->
<div id="mazeScreen" class="screen">
  <h1 class="title">–õ–∏–Ω–∏—è –ª–∞–±–∏—Ä–∏–Ω—Ç–∞</h1>
  <p class="subtitle" id="mazeTask"></p>
  <p>–£—Ä–æ–≤–µ–Ω—å <span id="levelNum">1</span></p>

  <div id="maze"></div>

  <div class="controls">
    <button onclick="move('up')">‚¨ÜÔ∏è</button>
    <div class="controls-row">
      <button onclick="move('left')">‚¨ÖÔ∏è</button>
      <button onclick="move('right')">‚û°Ô∏è</button>
    </div>
    <button onclick="move('down')">‚¨áÔ∏è</button>
  </div>

  <button class="back-btn" onclick="openMazeMenu()">‚¨Ö –ù–∞–∑–∞–¥</button>
</div>

<!-- ===== –ü–û–ë–ï–î–ê ===== -->
<div id="winScreen" class="screen">
  <h1 class="title">üéâ –£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!</h1>
  <p class="subtitle">–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!</p>

  <button class="red-btn" onclick="nextLevel()">‚û° –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å</button>
  <button class="back-btn" onclick="openMazeMenu()">‚¨Ö –í –º–µ–Ω—é</button>
</div>

<script>
/* ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø ===== */

function show(screenId) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById(screenId).classList.add("active");
}

function goHome() {
  show("home");
}

function openMemoryMenu() {
  show("memoryMenu");
}

function openMazeMenu() {
  show("mazeMenu");
}

/* ===== –ù–ê–ô–î–ò –ü–ê–†–£ ===== */

let firstCard = null;
let lock = false;
let matched = 0;

const memorySets = {
  "–°–º–µ—à–∞—Ä–∏–∫–∏": ["üê∞","üêª","üêß","üê±","üê∑","üê∏"],
  "–§–∏–∫—Å–∏–∫–∏": ["üîß","üî©","üí°","üîå","ü™õ","üß∞"],
  "–ú–∞—à–∞ –∏ –ú–µ–¥–≤–µ–¥—å": ["üëß","üêª","üçØ","üå≤","üè°","üêù"],
  "–í–∏–Ω–Ω–∏-–ü—É—Ö": ["üêª","üçØ","üê∑","üê∞","üå≥","üéà"],
  "–ü—Ä–æ—Å—Ç–æ–∫–≤–∞—à–∏–Ω–æ": ["üê±","üê∂","üêÆ","üì∏","üè†","ü•õ"]
};

function startMemory(name) {
  show("memoryGame");
  document.getElementById("memoryTitle").innerText = "–ü–µ—Ä—Å–æ–Ω–∞–∂–∏: " + name;

  const base = memorySets[name];
  const cards = [...base, ...base];
  shuffle(cards);

  const grid = document.getElementById("memoryGrid");
  grid.innerHTML = "";
  matched = 0;
  firstCard = null;
  lock = false;

  cards.forEach(symbol => {
    const div = document.createElement("div");
    div.className = "card hidden";
    div.dataset.symbol = symbol;
    div.innerText = symbol;
    div.onclick = () => flipCard(div);
    grid.appendChild(div);
  });

  document.getElementById("memoryStatus").innerText = "–ù–∞–π–¥–∏ –≤—Å–µ –ø–∞—Ä—ã!";
}

function flipCard(card) {
  if (lock || !card.classList.contains("hidden")) return;

  card.classList.remove("hidden");

  if (!firstCard) {
    firstCard = card;
    return;
  }

  if (firstCard.dataset.symbol === card.dataset.symbol) {
    matched += 2;
    firstCard = null;

    if (matched === 12) {
      document.getElementById("memoryStatus").innerText = "üéâ –¢—ã –≤—ã–∏–≥—Ä–∞–ª!";
    }
  } else {
    lock = true;
    setTimeout(() => {
      card.classList.add("hidden");
      firstCard.classList.add("hidden");
      firstCard = null;
      lock = false;
    }, 700);
  }
}

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

/* ===== –õ–ê–ë–ò–†–ò–ù–¢ ===== */

let heroEmoji = "üôÇ";
let targetEmoji = "‚≠ê";
let maze = [];
let player = { x: 1, y: 1 };
let level = 0;

/* ===== –£–†–û–í–ù–ò ===== */
const levels = [
  [
    ["‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ"],
    ["‚¨õ","S","‚¨ú","‚¨ú","‚¨õ","‚¨ú","T","‚¨õ"],
    ["‚¨õ","‚¨ú","‚¨õ","‚¨ú","‚¨õ","‚¨ú","‚¨õ","‚¨õ"],
    ["‚¨õ","‚¨ú","‚¨õ","‚¨ú","‚¨ú","‚¨ú","‚¨ú","‚¨õ"],
    ["‚¨õ","‚¨ú","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨ú","‚¨õ"],
    ["‚¨õ","‚¨ú","‚¨ú","‚¨ú","‚¨ú","‚¨ú","‚¨ú","‚¨õ"],
    ["‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ"]
  ],
  [
    ["‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ"],
    ["‚¨õ","S","‚¨ú","‚¨õ","‚¨ú","‚¨ú","‚¨ú","‚¨õ"],
    ["‚¨õ","‚¨ú","‚¨ú","‚¨õ","‚¨ú","‚¨õ","‚¨ú","‚¨õ"],
    ["‚¨õ","‚¨õ","‚¨ú","‚¨ú","‚¨ú","‚¨õ","‚¨ú","‚¨õ"],
    ["‚¨õ","‚¨ú","‚¨ú","‚¨õ","‚¨õ","‚¨õ","‚¨ú","‚¨õ"],
    ["‚¨õ","‚¨ú","‚¨õ","‚¨õ","‚¨ú","‚¨ú","T","‚¨õ"],
    ["‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ"]
  ],
  [
    ["‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ"],
    ["‚¨õ","S","‚¨ú","‚¨ú","‚¨ú","‚¨ú","‚¨õ","‚¨õ"],
    ["‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨ú","‚¨õ","‚¨ú","‚¨õ"],
    ["‚¨õ","‚¨ú","‚¨ú","‚¨ú","‚¨ú","‚¨õ","‚¨ú","‚¨õ"],
    ["‚¨õ","‚¨ú","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨ú","‚¨õ"],
    ["‚¨õ","‚¨ú","‚¨ú","‚¨ú","‚¨ú","‚¨ú","T","‚¨õ"],
    ["‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ","‚¨õ"]
  ]
];

function startMaze(hero) {
  level = 0;

  if (hero === "–ß–µ–±—É—Ä–∞—à–∫–∞") {
    heroEmoji = "üêª";
    targetEmoji = "üçä";
    document.getElementById("mazeTask").innerText = "–ß–µ–±—É—Ä–∞—à–∫–∞ –∏–¥—ë—Ç –∫ –∞–ø–µ–ª—å—Å–∏–Ω—É üçä";
  }

  if (hero === "–ü–∏–Ω") {
    heroEmoji = "üêß";
    targetEmoji = "ü§ñ";
    document.getElementById("mazeTask").innerText = "–ü–∏–Ω –∏–¥—ë—Ç –∫ –ë–∏–±–∏ ü§ñ";
  }

  if (hero === "–ú–∞—Ç—Ä–æ—Å–∫–∏–Ω") {
    heroEmoji = "üê±";
    targetEmoji = "üêÆ";
    document.getElementById("mazeTask").innerText = "–ú–∞—Ç—Ä–æ—Å–∫–∏–Ω –∏–¥—ë—Ç –∫ –ú—É—Ä–∫–µ üêÆ";
  }

  if (hero === "–ú–∞—à–∞") {
    heroEmoji = "üëß";
    targetEmoji = "üè†";
    document.getElementById("mazeTask").innerText = "–ú–∞—à–∞ –∏–¥—ë—Ç –∫ –¥–æ–º—É –ú–∏—à–∫–∏ üè†";
  }

  loadLevel();
  show("mazeScreen");
}

function loadLevel() {
  const template = levels[level];
  maze = [];
  for (let y = 0; y < template.length; y++) {
    maze[y] = [];
    for (let x = 0; x < template[y].length; x++) {
      if (template[y][x] === "S") {
        player = { x, y };
        maze[y][x] = heroEmoji;
      } else if (template[y][x] === "T") {
        maze[y][x] = targetEmoji;
      } else {
        maze[y][x] = template[y][x];
      }
    }
  }

  document.getElementById("levelNum").innerText = level + 1;
  drawMaze();
}

function drawMaze() {
  document.getElementById("maze").innerText =
    maze.map(row => row.join("")).join("\n");
}

function move(dir) {
  let dx = 0, dy = 0;
  if (dir === "up") dy = -1;
  if (dir === "down") dy = 1;
  if (dir === "left") dx = -1;
  if (dir === "right") dx = 1;

  const nx = player.x + dx;
  const ny = player.y + dy;

  if (maze[ny][nx] === "‚¨õ") return;

  if (maze[ny][nx] === targetEmoji) {
    show("winScreen");
    return;
  }

  maze[player.y][player.x] = "‚¨ú";
  player.x = nx;
  player.y = ny;
  maze[player.y][player.x] = heroEmoji;

  drawMaze();
}

function nextLevel() {
  level++;
  if (level >= levels.length) {
    alert("üèÜ –¢—ã –ø—Ä–æ—à—ë–ª –≤—Å–µ —É—Ä–æ–≤–Ω–∏!");
    openMazeMenu();
    return;
  }
  loadLevel();
  show("mazeScreen");
}
</script>

</body>
</html>